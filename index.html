<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>LAKSPICES LLC â€” Shop</title>
  <style>
    body { font-family: Arial, sans-serif; margin:20px; }
    header { display:flex; justify-content:space-between; align-items:center; }
    h1 { margin:0; }
    .grid { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-top:20px; }
    .card { border:1px solid #ccc; border-radius:8px; padding:12px; background:#fff; }
    .card img { width:100%; height:160px; object-fit:cover; border-radius:6px; }
    .title { font-weight:700; margin-top:8px; }
    .price { margin-top:6px; font-weight:bold; }
    .cart-icon { cursor:pointer; font-size:24px; position:relative; }
    .badge { background:red; color:white; border-radius:50%; padding:2px 6px; font-size:14px; position:absolute; top:-8px; right:-12px; }
    .cart-view { display:none; margin-top:20px; }
    .cart-item { border-bottom:1px solid #eee; padding:8px 0; display:flex; justify-content:space-between; }
    .total { margin-top:12px; font-weight:bold; }
    button { margin-top:8px; padding:6px 10px; cursor:pointer; }
    button.primary { background:#1a73e8; color:white; border:none; border-radius:6px; }
  </style>
</head>
<body>
  <header>
    <h1>LAKSPICES LLC â€” Spices Store</h1>
    <div class="cart-icon" id="cartIcon">
      ðŸ›’ <span class="badge" id="cartBadge">0</span>
    </div>
  </header>

  <!-- Products Grid -->
  <main id="productView">
    <div id="grid" class="grid"></div>
  </main>

  <!-- Cart View -->
  <div id="cartView" class="cart-view">
    <h2>Your Cart</h2>
    <div id="cartList"></div>
    <div class="total" id="cartTotal"></div>
    <div id="paypalButtons"></div>
    <button id="backToShop">Back to Shop</button>
  </div>

  <script>
    const PAYPAL_CLIENT_ID = "YOUR_PAYPAL_CLIENT_ID_HERE"; // replace with your valid client ID

    const products = [
      {id:1, name:"Red Chili", price:299, stock:10, image:"https://via.placeholder.com/200?text=Chili"},
      {id:2, name:"Black Pepper", price:399, stock:8, image:"https://via.placeholder.com/200?text=Pepper"},
      {id:3, name:"Cardamom", price:499, stock:5, image:"https://via.placeholder.com/200?text=Cardamom"},
      {id:4, name:"Cinnamon", price:350, stock:12, image:"https://via.placeholder.com/200?text=Cinnamon"}
    ];

    let cart = [];

    function renderProducts(){
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      products.forEach(p=>{
        const card = document.createElement("div");
        card.className="card";
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}">
          <div class="title">${p.name}</div>
          <div class="price">$${(p.price/100).toFixed(2)}</div>
          <button ${p.stock<=0?"disabled":""}>Add to Cart</button>
        `;
        card.querySelector("button").onclick = ()=>addToCart(p.id);
        grid.appendChild(card);
      });
    }

    function addToCart(id){
      const product = products.find(p=>p.id===id);
      if(!product || product.stock<=0) return;
      let item = cart.find(c=>c.id===id);
      if(item){
        if(item.qty < product.stock) item.qty++;
      } else {
        cart.push({id:product.id, name:product.name, price:product.price, qty:1});
      }
      updateBadge();
    }

    function updateBadge(){
      const totalQty = cart.reduce((s,i)=>s+i.qty,0);
      document.getElementById("cartBadge").textContent = totalQty;
    }

    function showCart(){
      document.getElementById("productView").style.display="none";
      document.getElementById("cartView").style.display="block";
      renderCart();
    }

    function backToShop(){
      document.getElementById("cartView").style.display="none";
      document.getElementById("productView").style.display="block";
    }

    function renderCart(){
      const list = document.getElementById("cartList");
      list.innerHTML="";
      let total=0;
      cart.forEach(it=>{
        const row = document.createElement("div");
        row.className="cart-item";
        row.innerHTML = `
          <div>${it.name} (x${it.qty})</div>
          <div>$${((it.price*it.qty)/100).toFixed(2)}</div>
        `;
        list.appendChild(row);
        total += it.price*it.qty;
      });
      document.getElementById("cartTotal").textContent="Total: $"+(total/100).toFixed(2);
      renderPayPal(total);
    }

    function renderPayPal(totalCents){
      const container = document.getElementById("paypalButtons");
      container.innerHTML="";
      if(cart.length===0) return;

      if(!window.paypal){
        const script = document.createElement("script");
        script.src = `https://www.paypal.com/sdk/js?client-id=${PAYPAL_CLIENT_ID}&currency=USD`;
        script.onload = ()=>renderPayPal(totalCents);
        document.head.appendChild(script);
        return;
      }

      paypal.Buttons({
        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              amount: { currency_code:"USD", value:(totalCents/100).toFixed(2) }
            }]
          });
        },
        onApprove: (data, actions) => {
          return actions.order.capture().then(details=>{
            alert("Payment successful, Thank you!");
            cart=[];
            updateBadge();
            backToShop();
            renderProducts();
          });
        }
      }).render("#paypalButtons");
    }

    // Event Listeners
    document.getElementById("cartIcon").onclick=showCart;
    document.getElementById("backToShop").onclick=backToShop;

    // Init
    renderProducts();
    updateBadge();
  </script>
</body>
</html>
