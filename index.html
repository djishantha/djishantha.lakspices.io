<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>LAKSPICES LLC — Spice Store</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 20px;
    }
    h1 { margin-bottom: 20px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }
    .card {
      border: 1px solid #ddd;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      background: #fafafa;
    }
    .card img {
      max-width: 100%;
      height: 140px;
      object-fit: cover;
      border-radius: 6px;
    }
    .price {
      font-weight: 700;
      margin-top: 8px;
    }
    .notavail {
      color: #b00;
      font-weight: 700;
    }
    .cart {
      position: fixed;
      right: 20px;
      top: 20px;
      width: 280px;
      border: 1px solid #ddd;
      padding: 12px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .cart h3 { margin-top: 0; }
    .cart-item {
      font-size: 14px;
      margin-bottom: 6px;
    }
    .cart-item button {
      margin-left: 3px;
    }
    button {
      padding: 6px 10px;
      margin-top: 6px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #0070ba;
      color: #fff;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: #888;
    }
  </style>
</head>
<body>
  <h1>Welcome to LAKSPICES LLC</h1>
  <p>Premium spices like chilies, cardamom, pepper & more!</p>

  <div id="grid" class="grid"></div>

  <div class="cart" id="cartbox">
    <h3>Your Cart</h3>
    <div id="cartitems"></div>
    <div id="total"></div>
    <!-- PayPal Buttons appear here -->
    <div id="paypal-button-container"></div>
  </div>

  <!-- PayPal SDK with your client ID -->
  <script src="https://www.paypal.com/sdk/js?client-id=AXUZYpgdB2oGgzp-3hGfnY5e_Qyuqs1tokPRfPpKLehbLXRXo6PBzvnxdKJiAL3z97c46aVOk-s2yMkT&currency=USD"></script>

  <script>
    // --- Static product list (expand this to 200 spices) ---
    let products = [
      {id:1, name:"Red Chilies", description:"Hot dried red chilies", price_cents:299, stock:10, image_url:"https://via.placeholder.com/200?text=Red+Chilies"},
      {id:2, name:"Cardamom", description:"Green cardamom pods", price_cents:499, stock:8, image_url:"https://via.placeholder.com/200?text=Cardamom"},
      {id:3, name:"Black Pepper", description:"Whole black peppercorns", price_cents:399, stock:15, image_url:"https://via.placeholder.com/200?text=Black+Pepper"},
      {id:4, name:"Cinnamon", description:"Ceylon cinnamon sticks", price_cents:599, stock:5, image_url:"https://via.placeholder.com/200?text=Cinnamon"}
    ];

    const cart = [];

    function renderGrid(){
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      for(const p of products){
        const el = document.createElement('div'); 
        el.className='card';
        el.innerHTML = `
          <img src="${p.image_url}" alt="${p.name}">
          <h4>${p.name}</h4>
          <div>${p.description||''}</div>
          <div class="price">$${(p.price_cents/100).toFixed(2)}</div>
          <div>${p.stock>0? ('In stock: '+p.stock) : '<span class="notavail">Not available</span>'}</div>
          <button id="add-${p.id}" ${p.stock===0?'disabled':''}>Add to cart</button>
        `;
        grid.appendChild(el);
        if(p.stock>0){
          document.getElementById(`add-${p.id}`).addEventListener('click', ()=> addToCart(p.id));
        }
      }
    }

    function addToCart(id){
      const prod = products.find(x=>x.id===id);
      if(!prod || prod.stock===0){ alert('Not available'); return; }
      const item = cart.find(c=>c.id===id);
      if(item){
        if(item.qty+1 > prod.stock){ alert('Not enough stock'); return;}
        item.qty++;
      } else cart.push({id:id, name:prod.name, price_cents: prod.price_cents, qty:1});
      renderCart();
    }

    function renderCart(){
      const box = document.getElementById('cartitems');
      box.innerHTML = '';
      let totalCents = 0;
      for(const it of cart){
        totalCents += it.price_cents * it.qty;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `${it.name} x ${it.qty} — $${(it.price_cents/100).toFixed(2)} each
          <button onclick="dec(${it.id})">-</button>
          <button onclick="inc(${it.id})">+</button>`;
        box.appendChild(div);
      }
      document.getElementById('total').innerText = 'Total: $' + (totalCents/100).toFixed(2);
    }

    function inc(id){
      const it=cart.find(c=>c.id===id); 
      const p=products.find(x=>x.id===id); 
      if(it.qty+1>p.stock){alert('No more stock');return;} 
      it.qty++; renderCart();
    }
    function dec(id){ 
      const it=cart.find(c=>c.id===id); 
      if(!it)return; 
      it.qty--; 
      if(it.qty<=0) cart.splice(cart.indexOf(it),1); 
      renderCart(); 
    }

    // --- PayPal Smart Buttons (client-side only demo) ---
    paypal.Buttons({
      createOrder: (data, actions) => {
        let total = 0;
        for(const it of cart){ total += it.price_cents * it.qty; }
        return actions.order.create({
          purchase_units: [{
            amount: { value: (total/100).toFixed(2) }
          }]
        });
      },
      onApprove: async (data, actions) => {
        const order = await actions.order.capture();
        alert("Payment successful! Thank you " + order.payer.name.given_name);
        cart.length = 0;
        renderCart();
      },
      onError: (err) => {
        console.error(err);
        alert("PayPal error: " + err.message);
      }
    }).render('#paypal-button-container');

    window.inc = inc; 
    window.dec = dec;

    renderGrid();
    renderCart();
  </script>
</body>
</html>
